<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link href="css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="css/Site.css" rel="stylesheet" media="screen">
	
<!-- 	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script> -->
    <script src="js/bootstrap.min.js"></script>
	
</head>
<body>

<script type="text/javascript">
	
function getCookie(cname) {
	console.log("get cookie");
	var name = cname + "=";
	var decodedCookie = decodeURIComponent(document.cookie);
	var ca = decodedCookie.split(';');
	for (var i = 0; i < ca.length; i++) {
		var c = ca[i];
		while (c.charAt(0) == ' ') {
			c = c.substring(1);
		}
		if (c.indexOf(name) == 0) {
			return c.substring(name.length, c.length);
		}
	}
	return "";
}

function setHeader(xhr) {
	console.log("set Header");
	token = getCookie("token");
	console.log("Token: " + token);
	xhr.setRequestHeader('Authorization', 'Bearer ' + token);
}

function generateSeatingArrangement(){
	  var id = localStorage.eventId;
		if(id > 0){
			var url = "/SchoolRestJPA/rest/tabletopservices/events/" + id + "/generateSeatingArrangement";
	  
		 $.ajax({ 
			   type: "PUT",  
		       url: url,  
		       dataType: "json",  
		       success: function(resp){  
		         // we have the response
		         console.log("Success");
		       },  
		       error: function (jqXHR, exception) {
		    	    alert("There was an error.");
		    	    console.log("Error" + jqXHR.responseText);
		    	    console.log(exception.responseText);
		    	  },
		    	  beforeSend: setHeader
			});
		}
	}
  </script>
<div class="row">
<div class="col-sm-12 col-md-12 col-lg-12">
	<a href="/StudentRest-HTML-JPA/WebContent/EditEvent.html" class="pull-right">Return to Event</a>
</div>
</div>
<div class="row">
    	<div class="col-sm-12 col-md-12 col-lg-12">
    	
    	<div class="btn-group btn-group-justified">
    		<a href="#" id="generateSeatingArrangement" class="btn btn-info">Generate Seating</a>
    		<a href="/StudentRest-HTML-JPA/WebContent/EditSeatingArrangement.html" id="btnEditSeatingArrangement" class="btn btn-info">Edit Seating Arrangement</a>
    		<a href="/StudentRest-HTML-JPA/WebContent/GuestListTable.html" id="btnGuestListView" class="btn btn-info">Guest List View</a>
    		<a href="/StudentRest-HTML-JPA/WebContent/PrintTablesList.html" id="btnTableView" class="btn btn-info">Table View</a>
    		<a href="/StudentRest-HTML-JPA/WebContent/PlaceCards.html" id ="btnPlaceCard" class="btn btn-info">PlaceCards</a>
    	</div>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function() {
	$('#'+ localStorage.tablesNavSelect).addClass("active");
	$("#generateSeatingArrangement").click(function(e){
		generateSeatingArrangement();
	})
});
</script>
</body>
</html>