<!DOCTYPE html>
<html>
  <head>
    <title>Tabletops</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="css/Site.css" rel="stylesheet" media="screen">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script type="text/javascript">
		$(document).ready(function() {
			$('#nav-container').load('nav.html');
			loadUsersTable();
		});
	</script>
  </head>
  <body>
  <script type="text/javascript">
  function loadUsersTable(){
	  var id = localStorage.eventId;
		if(id > 0){
			var guestsUrl = "/SchoolRestJPA/rest/tabletopservices/events/" + id + "/guests",
	  
		 $.ajax({ 
			   type: "GET",  
		       url: guestsUrl,  
		       dataType: "json",  
		       success: function(resp){  
		         // we have the response  
		       
		         $('#guest_placecard').html("");
		         var placecard;
		         var col = 0;
		         $.each(resp, function(i, guest){
		        	
		        	if (col == 0) {
		        		$('#guest_placecards').append('<div class="row">');
		        	}
       	        	placecard='<div class="col-sm-4 col-md-4 col-lg-4">'
       	        		+ '<div class="thumbnail placecard"><h2 class="text-center text-primary text-capitalize">'+guest.name+'</h2>'
       					+'<h1 class="text-center text-primary">'+guest.eventTableNumber+'</h1>'
       					+'<h3 class="text-center text-muted">'+guest.clientRelationship+'</h3>'
       					+'</div></div>';
       		         $('#guest_placecards').append(placecard);	
       		         col = col + 1;
       		         if(col == 3)
    		         {
      		        	$('#guest_placecards').append('</div>');
      		        	col = 0;
     		         }
		         });
		       },  
		       error: function (jqXHR, exception) {
		    	    
		    	    console.log("Error" + jqXHR.responseText);
		    	    console.log(exception.responseText);
		    	  }  
			});
	}
  </script>
    <div id="nav-container"></div>

    <div class="container">
    	<div class="row">
    		<div class="col-sm-12 col-md-12 col-lg-12">
    			<span><h1>Placecards</h1>
    			<button class="btn btn-info">Print</button></span>
   			 </div>
    	</div>
    	<hr/>
		<div id="guest_placecards"></div>
	</div>

	</div><!-- /.container -->
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>